(function(e){function t(t){for(var o,n,i=t[0],l=t[1],c=t[2],u=0,p=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],o=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(o=!1)}o&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var o={},s={app:0},r=[];function n(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=o,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-main",[a("History")],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticStyle:{height:"80vh"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"item-key":"jobExecutionId","sort-by":"createTime","sort-desc":"",height:"80vh",expanded:e.expanded,"single-expand":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item",fn:function(t){var o=t.item,s=t.expand,r=t.isExpanded;return[a("tr",[a("td",{staticClass:"text-center"},[e._v(e._s(o.jobExecutionId))]),a("td",{staticClass:"text-center"},[e._v(e._s(o.jobInstanceId.jobName))]),a("td",{staticClass:"text-center"},[e._v(e._s(o.createTime))]),a("td",{staticClass:"text-center"},[e._v(e._s(o.startTime))]),a("td",{staticClass:"text-center"},[e._v(e._s(o.endTime))]),a("td",{staticClass:"text-center"},[e._v(e._s(e.statusTranslate(o.status)))]),a("td",{staticClass:"text-center"},[e.isPurchaseConvertComplete(o.batchStepExecutions)?a("v-chip",{staticClass:"ma-1",attrs:{color:"success",outlined:"",label:""},on:{click:function(t){return t.stopPropagation(),e.downloadPurchaseOrder(o.jobExecutionId)}}},[e._v(" 다운로드 ")]):e._e()],1),a("td",{staticClass:"text-center"},[a("v-icon",{on:{click:function(e){return s(!r)}}},r?[e._v("mdi-chevron-up")]:[e._v("mdi-chevron-down")])],1)])]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("업무 자동화")]),a("v-spacer"),a("SettingDialog"),a("JobPlayDialog")],1)]},proxy:!0},{key:"expanded-item",fn:function(t){var o=t.headers,s=t.item;return[a("td",{staticClass:"pa-0",attrs:{colspan:o.length}},[a("v-stepper",{attrs:{"alt-labels":""}},[a("v-stepper-header",[e._l(e.getJobSteps(s.jobInstanceId.jobName),(function(t,o){return[a("v-stepper-step",{key:o,staticStyle:{"font-size":"14px",cursor:"pointer"},attrs:{step:o+1,complete:e.isStepCompleted(s.batchStepExecutions[o]),rules:[function(){return e.isStepError(s.batchStepExecutions[o])}]},on:{click:function(t){!e.isStepError(s.batchStepExecutions[o])&&e.showCustomersError(s.batchStepExecutions[o])}}},[e._v(" "+e._s(t)+" ")]),o+1<e.getJobSteps(s.jobInstanceId.jobName).length?a("v-divider",{key:"divider-"+o}):e._e()]}))],2)],1)],1)]}}])}),a("MessageDialog")],1)},i=[],l=a("5530"),c=(a("159b"),a("7db0"),a("2f62")),d=(a("ac1f"),a("1276"),a("21a6")),u=function(e,t){var a="content-disposition",o=e.headers[a],s=void 0===o?t:o.split('"')[1];console.log("Received header ["+a+"]: "+o+", effective fileName: "+s),Object(d["saveAs"])(e.data,s)},p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500"},model:{value:e.getMessageDialog.show,callback:function(t){e.$set(e.getMessageDialog,"show",t)},expression:"getMessageDialog.show"}},[a("v-card",[a("v-card-title",[e._v(e._s(e.getMessageDialog.title))]),a("v-card-text",{staticStyle:{"white-space":"pre-line"}},[e._v(" "+e._s(e.getMessageDialog.message)+" ")]),e.isCustomersDownload?a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.downloadUnregisteredCustomers}},[e._v(" 미등록 거래처 목록 다운로드 ")])],1):e._e()],1)],1)},v=[],g={name:"MessageDialog",computed:Object(l["a"])({},Object(c["b"])(["getMessageDialog","isCustomersDownload"])),methods:{downloadUnregisteredCustomers:function(){this.$http.get("api/unregistered-customer/"+this.getMessageDialog.jobExecutionId,{responseType:"blob"}).then((function(e){return u(e,"미등록 거래처.xlsx")})).catch((function(e){return console.error("Could not Download the Excel report from the backend.",e)}))}}},f=g,m=a("2877"),b=a("6544"),h=a.n(b),x=a("8336"),_=a("b0af"),C=a("99d9"),y=a("169a"),w=a("2fa4"),V=Object(m["a"])(f,p,v,!1,null,"a10029c8",null),D=V.exports;h()(V,{VBtn:x["a"],VCard:_["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VDialog:y["a"],VSpacer:w["a"]});var j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ma-2 white--text",attrs:{color:"blue-grey"}},"v-btn",s,!1),o),[e._v(" 배치 설정 "),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-cog")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("배치 환경 설정")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("VueCronEditorBuefy",{model:{value:e.cronExpression,callback:function(t){e.cronExpression=t},expression:"cronExpression"}}),e._v(" "+e._s(e.cronExpression)+" ")],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Legal middle name",hint:"example of helper text only on focus"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Legal last name*",hint:"example of persistent helper text","persistent-hint":"",required:""}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Email*",required:""}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Password*",type:"password",required:""}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{items:["0-17","18-29","30-54","54+"],label:"Age*",required:""}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-autocomplete",{attrs:{items:["Skiing","Ice hockey","Soccer","Basketball","Hockey","Reading","Writing","Coding","Basejump"],label:"Interests",multiple:""}})],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Close ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Save ")])],1)],1)],1)},S=[],E=a("dcce"),k=a.n(E),O={name:"SettingDialog",components:{VueCronEditorBuefy:k.a},data:function(){return{dialog:!1,cronExpression:"*/1 * * * *"}}},T=O,I=a("c6a6"),M=a("62ad"),P=a("a523"),q=a("132d"),A=a("0fd9"),J=a("b974"),N=a("8654"),$=Object(m["a"])(T,j,S,!1,null,"07a50d5e",null),L=$.exports;h()($,{VAutocomplete:I["a"],VBtn:x["a"],VCard:_["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VCol:M["a"],VContainer:P["a"],VDialog:y["a"],VIcon:q["a"],VRow:A["a"],VSelect:J["a"],VSpacer:w["a"],VTextField:N["a"]});var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ma-2 white--text",attrs:{color:"blue-grey"}},"v-btn",s,!1),o),[e._v(" 수동 실행 "),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-play")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("수동 실행")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"배치 기간",required:""}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Legal middle name",hint:"example of helper text only on focus"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Legal last name*",hint:"example of persistent helper text","persistent-hint":"",required:""}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Email*",required:""}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Password*",type:"password",required:""}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{items:["0-17","18-29","30-54","54+"],label:"Age*",required:""}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-autocomplete",{attrs:{items:["Skiing","Ice hockey","Soccer","Basketball","Hockey","Reading","Writing","Coding","Basejump"],label:"Interests",multiple:""}})],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Close ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Save ")])],1)],1)],1)},H=[],R={name:"JobPlayDialog",methods:Object(l["a"])(Object(l["a"])({},Object(c["c"])(["showDialog"])),{},{executeJob:function(e){var t=this;this.$http.post("api/run/"+e).then((function(e){console.log(e),t.getHistoryList(),t.showDialog("작업 완료","작업 완료 되었습니다."),setTimeout((function(){return t.dialog.show=!1}),5e3)})).catch((function(e){return t.showDialog("에러 상세 정보",e)}))}}),data:function(){return{dialog:!1}}},z=R,F=Object(m["a"])(z,B,H,!1,null,"6b3d7d96",null),U=F.exports;h()(F,{VAutocomplete:I["a"],VBtn:x["a"],VCard:_["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VCol:M["a"],VContainer:P["a"],VDialog:y["a"],VIcon:q["a"],VRow:A["a"],VSelect:J["a"],VSpacer:w["a"],VTextField:N["a"]});var W={name:"History",components:{MessageDialog:D,SettingDialog:L,JobPlayDialog:U},mounted:function(){this.getHistoryList()},methods:Object(l["a"])(Object(l["a"])({},Object(c["c"])(["showDialog","showCustomersError"])),{},{isStepCompleted:function(e){return void 0!==e&&""===e.exitMessage},isStepError:function(e){return void 0===e||""===e.exitMessage},isPurchaseConvertComplete:function(e){var t=!1;return e.forEach((function(e){"발주 변환"===e.stepName&&(t="COMPLETED"===e.exitCode)})),t},getHistoryList:function(){var e=this;this.$http.get("api/batchJobExecutions?page=0&size=1000&sort=createTime,desc").then((function(t){return e.items=t.data._embedded.batchJobExecutions})).catch((function(t){return e.showDialog("에러 상세 정보",t)}))},downloadPurchaseOrder:function(e){this.$http.get("api/purchase-order/"+e,{responseType:"blob"}).then((function(e){return u(e,"구매 발주.zip")})).catch((function(e){return console.error("Could not Download the Excel report from the backend.",e)}))},statusTranslate:function(e){switch(e){case"COMPLETED":return"완료";case"FAILED":return"실패";default:return e}},getJobSteps:function(e){return this.jobSteps.find((function(t){return t.jobName===e})).steps}}),data:function(){return{jobSteps:[{jobName:"전체",steps:["초기화","품목 다운로드","거래처 다운로드","데이터 수집","거래처 체크","품목 변환","수주 변환","발주 변환","품목 업로드","수주 업로드"]},{jobName:"품목 등록",steps:["초기화","품목 다운로드","데이터 수집","품목 변환","품목 업로드"]},{jobName:"거래처 확인",steps:["초기화","거래처 다운로드","데이터 수집","거래처 체크"]},{jobName:"수주 등록",steps:["초기화","품목 다운로드","거래처 다운로드","데이터 수집","거래처 체크","품목 변환","수주 변환","품목 업로드","수주 업로드"]},{jobName:"발주 변환",steps:["초기화","품목 다운로드","데이터 수집","발주 변환"]}],items:[],expanded:[],headers:[{text:"배치 번호",align:"center"},{text:"배치 종류",align:"center"},{text:"생성 시간",align:"center"},{text:"시작 시간",align:"center"},{text:"종료 시간",align:"center"},{text:"실행 결과",align:"center"},{text:"발주 데이터",align:"center",sortable:!1},{text:"스텝",align:"center",value:"data-table-expand",sortable:!1}]}}},G=W,K=a("cc20"),Q=a("8fea"),X=a("ce7e"),Y=a("7e85"),Z=a("9c54"),ee=a("56a4"),te=a("71d9"),ae=a("2a7f"),oe=Object(m["a"])(G,n,i,!1,null,"7fd543b2",null),se=oe.exports;h()(oe,{VChip:K["a"],VContainer:P["a"],VDataTable:Q["a"],VDivider:X["a"],VIcon:q["a"],VSpacer:w["a"],VStepper:Y["a"],VStepperHeader:Z["a"],VStepperStep:ee["a"],VToolbar:te["a"],VToolbarTitle:ae["a"]});var re={name:"App",components:{History:se},data:function(){return{}}},ne=re,ie=a("7496"),le=a("f6c4"),ce=Object(m["a"])(ne,s,r,!1,null,null,null),de=ce.exports;h()(ce,{VApp:ie["a"],VMain:le["a"]});var ue=a("f309");a("5363");o["default"].use(ue["a"]);var pe=new ue["a"]({icons:{iconfont:"mdi"}}),ve=a("bc3a"),ge=a.n(ve),fe=a("2106"),me=a.n(fe);a("caad"),a("2532"),a("5319");o["default"].use(c["a"]);var be=new c["a"].Store({state:{messageDialog:{show:!1,title:"",message:"",jobExecutionId:""}},getters:{getMessageDialog:function(e){return e.messageDialog},isCustomersDownload:function(e){var t=!1;return null!==e.messageDialog.message&&(t=e.messageDialog.message.includes("미등록")),t}},mutations:{showDialog:function(e,t){e.messageDialog.title=t.title,e.messageDialog.message=t.message,e.messageDialog.show=!0},showCustomersError:function(e,t){var a=t._links.jobExecutionId.href;e.messageDialog.jobExecutionId=a.substring(a.lastIndexOf("/")+1),e.messageDialog.title="에러 상세 정보",e.messageDialog.message=t.exitMessage.replace(":","\n"),e.messageDialog.show=!0}},actions:{},modules:{}});o["default"].config.productionTip=!1,o["default"].use(me.a,ge.a),new o["default"]({vuetify:pe,store:be,render:function(e){return e(de)}}).$mount("#app")}});
//# sourceMappingURL=app.40e864df.js.map